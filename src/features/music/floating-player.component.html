@if (player.isVisible()) {
  <div class="fixed bottom-4 right-4 z-50 bg-neutral-900/95 border border-neutral-600 rounded-2xl shadow-2xl backdrop-blur-xl p-4 w-[340px] max-w-[90vw] transition-all duration-300 ease-in-out hover:shadow-3xl hover:scale-105" style="backdrop-filter: blur(16px); border: 1px solid rgba(112, 128, 144, 0.3);">
    <div class="flex items-center justify-between mb-3">
      <span class="text-sm font-medium text-gray-200">Плеер</span>
      <div class="flex items-center gap-2">
        <button (click)="player.toggleMinimize()" class="text-xs text-gray-300 hover:text-white transition-all duration-200 transform hover:scale-110">{{ player.isMinimized() ? '⊞' : '⊟' }}</button>
        <button (click)="player.stop()" class="text-xs text-gray-300 hover:text-red-400 transition-all duration-200 transform hover:rotate-90 hover:scale-110" aria-label="Остановить воспроизведение">✖</button>
      </div>
    </div>
    @if (!player.isMinimized() && player.safeUrl(); as url) {
      <div class="flex items-center gap-3 mb-4">
        <div class="relative">
          <img src="/src/features/music/spotify-icon.svg" alt="Spotify" class="w-10 h-10 rounded-full shadow-lg" />
          <div class="absolute inset-0 w-10 h-10 rounded-full bg-green-400 opacity-20 animate-ping"></div>
        </div>
        <div class="flex-1 min-w-0">
          <p class="text-sm font-semibold text-gray-100 truncate">Spotify Connect</p>
          <p class="text-xs text-gray-400">Воспроизведение музыки</p>
        </div>
      </div>
      <div class="flex items-center gap-3 mb-3">
        <img src="/src/features/music/spotify-icon.svg" alt="Spotify" class="w-8 h-8 rounded-full" />
        <div class="flex-1 min-w-0">
          <p class="text-sm font-medium text-gray-200 truncate">Spotify</p>
          <p class="text-xs text-gray-400">Воспроизведение</p>
        </div>
      </div>
      <div class="w-full h-[180px] overflow-hidden rounded-xl transition-all duration-300">
        <iframe [src]="url" width="100%" height="100%" frameBorder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" class="hover:scale-[1.02] transition-transform duration-300"></iframe>
      </div>
    }
  </div>
}
